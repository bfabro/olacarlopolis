<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lanches – Pedido por WhatsApp (MVP)</title>
  <style>
    :root {
      --bg: #0f1115;
      --card: #171a20;
      --muted: #96a0b5;
      --text: #e7ecf3;
      --brand: #4f8cff;
      --ok: #22c55e;
      --warn: #f59e0b;
      --danger: #ef4444;
      --chip: #243044;
      --chip-text: #cfe0ff;
      --border: #242a35;
    }
    html, body { background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    * { box-sizing: border-box; }

    .oc-lanches-wrap { max-width: 1100px; margin: 24px auto; padding: 16px; }
    .oc-grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 980px) { .oc-grid { grid-template-columns: 1.5fr 1fr; } }

    .oc-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 16px; }
    .oc-title { font-size: 22px; margin: 0 0 8px; }
    .oc-sub { color: var(--muted); font-size: 14px; margin-bottom: 16px; }

    .oc-prod-list { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 600px) { .oc-prod-list { grid-template-columns: 1fr 1fr; } }
    .oc-prod { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; background: #12161d; border: 1px solid var(--border); border-radius: 12px; padding: 12px; }
    .oc-prod h4 { margin: 0 0 6px; font-size: 16px; }
    .oc-prod p { margin: 0; color: var(--muted); font-size: 13px; }
    .oc-price { font-weight: 600; font-size: 14px; }
    .oc-add { background: var(--brand); color: white; border: none; border-radius: 10px; padding: 8px 10px; cursor: pointer; font-weight: 600; }

    .oc-cart { position: sticky; top: 16px; }
    .oc-cart-empty { color: var(--muted); font-size: 14px; }
    .oc-cart-line { display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 10px; padding: 10px 0; border-bottom: 1px dashed var(--border); }
    .oc-qty { display: inline-flex; align-items: center; gap: 6px; background: #11151b; border: 1px solid var(--border); border-radius: 8px; padding: 4px; }
    .oc-qty button { background: transparent; border: none; color: var(--text); font-size: 18px; width: 26px; height: 26px; cursor: pointer; }

    .oc-cart-totals { margin-top: 12px; font-size: 14px; }
    .oc-cart-totals div { display: flex; justify-content: space-between; margin: 4px 0; }
    .oc-total { font-weight: 800; font-size: 16px; }

    .oc-field { margin-bottom: 10px; }
    .oc-field label { display: block; font-size: 13px; color: var(--muted); margin-bottom: 6px; }
    .oc-field input, .oc-field select, .oc-field textarea { width: 100%; background: #0f141b; color: var(--text); border: 1px solid var(--border); border-radius: 10px; padding: 10px 12px; font: inherit; }
    .oc-flex { display: grid; gap: 10px; grid-template-columns: 1fr; }
    @media (min-width: 700px) { .oc-flex.cols-2 { grid-template-columns: 1fr 1fr; } }

    .oc-send { width: 100%; margin-top: 12px; padding: 14px; background: var(--ok); color: #07120a; border: none; border-radius: 12px; font-size: 16px; font-weight: 800; cursor: pointer; }
    .oc-send[disabled] { filter: grayscale(.7); opacity: .7; cursor: not-allowed; }

    .oc-badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px; border-radius: 999px; background: var(--chip); color: var(--chip-text); font-size: 12px; font-weight: 600; }
    .oc-badge.warn { background: #392a14; color: #ffd8a8; border: 1px solid #513a18; }
    .oc-badge.ok { background: #142f1d; color: #b8ffcf; border: 1px solid #164a27; }
    .oc-badge.danger { background: #3a1616; color: #ffc9c9; border: 1px solid #532222; }

    .oc-mini { font-size: 12px; color: var(--muted); }

    dialog.oc-modal { width: min(520px, 96vw); border: 1px solid var(--border); border-radius: 16px; padding: 0; background: var(--card); color: var(--text); }
    .oc-modal header { padding: 14px 16px; border-bottom: 1px solid var(--border); display:flex; justify-content: space-between; align-items:center; }
    .oc-modal .oc-content { padding: 14px 16px; }
    .oc-modal .oc-actions { padding: 14px 16px; border-top: 1px solid var(--border); display:flex; gap:8px; justify-content:flex-end; }
    .oc-chip { display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:10px; border:1px solid var(--border); background:#0f141b; margin: 4px 6px 4px 0; }
    .oc-chip input { transform: scale(1.1); }
    .oc-btn-sec { background:#0f141b; color:var(--text); border:1px solid var(--border); border-radius:10px; padding:10px 12px; cursor:pointer; }
    .oc-btn-pri { background:var(--brand); color:#fff; border:none; border-radius:10px; padding:10px 12px; cursor:pointer; font-weight:700; }

    .oc-right { text-align:right; }
    .oc-row { display:flex; justify-content:space-between; align-items:center; gap:10px; }

    .oc-muted { color: var(--muted); }
  </style>
</head>
<body>
  <div class="oc-lanches-wrap" id="app">
    <div class="oc-grid">
      <!-- COLUNA ESQ: Produtos -->
      <section class="oc-card">
        <div class="oc-row">
          <h2 class="oc-title" id="est-name">Loja</h2>
          <span id="openBadge" class="oc-badge warn">Verificando horário…</span>
        </div>
        <div class="oc-sub" id="est-desc">Monte seu pedido e envie por WhatsApp. O pedido só é confirmado após resposta da loja.</div>

        <div class="oc-field">
          <label>Como você quer receber?</label>
          <div class="oc-flex cols-2">
            <select id="tipoPedido">
              <option value="Entrega">Entrega</option>
              <option value="Retirada">Retirada</option>
            </select>
            <select id="bairroSelect"></select>
          </div>
        </div>
        <div id="enderecoFields" class="oc-flex cols-2">
          <div class="oc-field">
            <label>Endereço</label>
            <input id="endereco" type="text" placeholder="Rua, número, complemento" />
          </div>
          <div class="oc-field">
            <label>Referência (opcional)</label>
            <input id="referencia" type="text" placeholder="Portaria, bloco, ponto de referência" />
          </div>
        </div>

        <div class="oc-prod-list" id="prodList"></div>
      </section>

      <!-- COLUNA DIR: Carrinho & Envio -->
      <aside class="oc-card oc-cart">
        <h3 class="oc-title">Seu pedido</h3>
        <div id="cartContainer" class="oc-cart-empty">Seu carrinho está vazio.</div>

        <div class="oc-field oc-flex cols-2" style="margin-top:12px;">
          <div>
            <label>Seu nome</label>
            <input id="cliNome" type="text" placeholder="Seu nome" />
          </div>
          <div>
            <label>Seu telefone</label>
            <input id="cliFone" type="tel" placeholder="(43) 9xxxx-xxxx" />
          </div>
        </div>
        <div class="oc-field">
          <label>Forma de pagamento</label>
          <select id="pagamento">
            <option value="PIX">PIX</option>
            <option value="Dinheiro">Dinheiro</option>
            <option value="Cartão">Cartão</option>
          </select>
        </div>
        <div class="oc-field">
          <label>Observações gerais (opcional)</label>
          <textarea id="obsGeral" rows="2" placeholder="Ex.: Coca bem gelada; sem pimenta"></textarea>
        </div>

        <div class="oc-cart-totals" id="totalsBox"></div>
        <button id="btnEnviar" class="oc-send" disabled>Enviar pedido pelo WhatsApp</button>
        <div class="oc-mini oc-muted" id="minimoMsg"></div>
      </aside>
    </div>
  </div>

  <!-- Modal item/adicionais -->
  <dialog class="oc-modal" id="itemModal">
    <header>
      <strong id="mNome">Item</strong>
      <button class="oc-btn-sec" onclick="document.getElementById('itemModal').close()">Fechar</button>
    </header>
    <div class="oc-content">
      <div class="oc-muted" id="mDesc"></div>
      <div style="margin-top:10px;">
        <div style="margin:8px 0 6px; font-weight:700;">Adicionais</div>
        <div id="mAdds"></div>
      </div>
      <div class="oc-field" style="margin-top:8px;">
        <label>Observações</label>
        <input id="mObs" type="text" placeholder="Ex.: sem cebola, ponto da carne" />
      </div>
      <div class="oc-row" style="margin-top:10px;">
        <div class="oc-qty">
          <button id="mMenos">−</button>
          <span id="mQtd">1</span>
          <button id="mMais">+</button>
        </div>
        <div class="oc-right"><span class="oc-muted">Subtotal item: </span><strong id="mSubtotal">R$ 0,00</strong></div>
      </div>
    </div>
    <div class="oc-actions">
      <button class="oc-btn-pri" id="mAddBtn">Adicionar ao carrinho</button>
    </div>
  </dialog>

  <script>
    /*******************
     * CONFIG EXEMPLO  *
     *******************/
    const EST = {
      slug: "burger-do-centro",
      nome: "Burger do Centro",
      whatsapp: "43 99999-9999",
      descricao: "Atendemos Carlópolis e região. Taxas por bairro e retirada no balcão.",
      horarios: { // use 24h HH:MM-HH:MM. Dias: dom, seg, ter, qua, qui, sex, sab
        seg: "18:00-23:00",
        ter: "18:00-23:00",
        qua: "18:00-23:00",
        qui: "18:00-23:00",
        sex: "18:00-00:30",
        sab: "18:00-00:30",
        dom: "18:00-23:00"
      },
      taxasEntrega: { "Centro": 3.0, "Vila Nova": 5.0, "Jardim América": 6.0 },
      pedidoMinimo: { Entrega: 20 },
      cardapio: [
        { id:"xs1", nome:"X-Salada", preco:18.9, desc:"Pão, hambúrguer 120g, queijo, alface, tomate, maionese.", adicionais:[
          {id:"bacon", nome:"Bacon", preco:3.0},
          {id:"cheddar", nome:"Cheddar", preco:2.5},
          {id:"ovo", nome:"Ovo", preco:2.0}
        ]},
        { id:"xb1", nome:"X-Bacon", preco:22.9, desc:"Com bacon crocante.", adicionais:[
          {id:"bacon2x", nome:"Bacon extra", preco:3.0},
          {id:"cheddar", nome:"Cheddar", preco:2.5}
        ]},
        { id:"fr1", nome:"Fritas média", preco:12.0, desc:"300g" },
        { id:"coca350", nome:"Coca 350ml", preco:6.0 },
        { id:"guarana1l", nome:"Guaraná 1L", preco:9.0 }
      ]
    };

    // Captura utm e mesa (se houver)
    const UTM = new URLSearchParams(location.search).get('utm') || null;
    const MESA = new URLSearchParams(location.search).get('mesa') || null;

    /*******************
     * HELPERS         *
     *******************/
    const money = v => (v||0).toLocaleString('pt-BR', { style:'currency', currency:'BRL' });

    function normalizePhone(raw) {
      let n = (raw || "").replace(/\D/g, "");
      if (n.startsWith("0")) n = n.replace(/^0+/, "");
      if (n.startsWith("55")) return n;
      return "55" + n;
    }

    function parseHM(s) { // "18:00" -> {h:18,m:0}
      const [h,m] = s.split(":").map(Number); return {h, m};
    }

    function isOpenNow(horarios) {
      // Mapa JS: 0=dom,1=seg,...
      const mapa = ['dom','seg','ter','qua','qui','sex','sab'];
      const now = new Date();
      const dia = mapa[now.getDay()];
      const faixa = horarios?.[dia];
      if (!faixa) return {open:false};
      const [ini, fim] = faixa.split('-');
      const {h:hi, m:mi} = parseHM(ini);
      const {h:hf, m:mf} = parseHM(fim);
      const t = now.getHours()*60 + now.getMinutes();
      const a = hi*60 + mi; const b = hf*60 + mf;
      // suporta virada de dia (ex.: 18:00-00:30)
      let open = false;
      if (b >= a) open = (t >= a && t <= b); else open = (t >= a || t <= b);
      return {open, faixa};
    }

    function calcularTotais(carrinho, taxaEntrega = 0) {
      const subtotal = carrinho.reduce((acc, item) => {
        const base = item.preco * item.qtd;
        const add = (item.adicionais || []).reduce((a, ad) => a + ad.preco, 0) * item.qtd;
        return acc + base + add;
      }, 0);
      const total = subtotal + (taxaEntrega || 0);
      return { subtotal, total };
    }

    function montarTextoPedido(est, carrinho, dados) {
      const agora = new Date();
      const id = `${est.nome.split(' ')[0].toUpperCase().slice(0,3)}-${String(agora.getFullYear()).slice(2)}${String(agora.getMonth()+1).padStart(2,"0")}${String(agora.getDate()).padStart(2,"0")}-${String(agora.getHours()).padStart(2,"0")}${String(agora.getMinutes()).padStart(2,"0")}`;

      const taxaEntrega = (dados.tipo === 'Entrega')
        ? (est.taxasEntrega?.[dados.bairroEntrega] || 0)
        : 0;

      const { subtotal, total } = calcularTotais(carrinho, taxaEntrega);

      const itensTxt = carrinho.map(it => {
        const adds = (it.adicionais || []).map(a => `+${a.nome}`).join(', ');
        const obs  = it.obs ? `[${it.obs}]` : '';
        const addsTxt = adds ? ` [${adds}]` : '';
        return `- ${it.qtd}x ${it.nome} (${money(it.preco)})${addsTxt} ${obs}`.trim();
      }).join('\n');

      const enderecoTxt = (dados.tipo === 'Entrega')
        ? `Bairro: ${dados.bairroEntrega}\nEndereço: ${dados.endereco}${dados.referencia?` (${dados.referencia})`:''}\n`
        : `Retirada no balcão\n`;

      const mesaTxt = MESA ? `Mesa: ${MESA}\n` : '';

      return [
        `Pedido #${id}`,
        `Loja: ${est.nome}`,
        `Tipo: ${dados.tipo}`,
        mesaTxt + enderecoTxt + `Cliente: ${dados.nome || '-'} • Tel: ${dados.telefone || '-'}`,
        ``,
        `Itens:\n${itensTxt}`,
        ``,
        `Subtotal: ${money(subtotal)}`,
        (taxaEntrega? `Taxa (${dados.bairroEntrega}): ${money(taxaEntrega)}` : null),
        `Total: ${money(total)}`,
        `Pagamento: ${dados.pagamento || '-'}`,
        (dados.obsGeral ? `Obs: ${dados.obsGeral}` : null),
        ``,
        `Origem: olacarlopolis.com/lanches/${est.slug}${UTM ? ` (utm=${UTM})` : ''}`
      ].filter(Boolean).join('\n');
    }

    function enviarPedido(est, carrinho, dados) {
      if (!carrinho?.length) { alert('Seu carrinho está vazio.'); return; }
      if (dados.tipo === 'Entrega' && est.pedidoMinimo?.Entrega) {
        const { subtotal } = calcularTotais(carrinho, 0);
        if (subtotal < est.pedidoMinimo.Entrega) {
          alert(`Pedido mínimo para entrega: ${money(est.pedidoMinimo.Entrega)}`);
          return;
        }
      }
      const texto = montarTextoPedido(est, carrinho, dados);
      const url = `https://wa.me/${normalizePhone(est.whatsapp)}?text=${encodeURIComponent(texto)}`;

      // (Opcional) salvar stub do pedido (Firebase) – descomente e ajuste
      // firebase.database().ref(`pedidos/${Date.now()}`).set({
      //   loja: est.slug,
      //   totalEstimado: calcularTotais(carrinho).total,
      //   tipo: dados.tipo,
      //   bairro: dados.bairroEntrega || null,
      //   mesa: MESA || null,
      //   origem: UTM || 'direct'
      // });

      window.open(url, '_blank');
    }

    /*******************
     * ESTADO & RENDER *
     *******************/
    const state = {
      est: EST,
      carrinho: [],
      selecionado: null,
    };

    function renderEst() {
      document.getElementById('est-name').textContent = state.est.nome;
      document.getElementById('est-desc').textContent = state.est.descricao || '';

      // Status aberto/fechado
      const st = isOpenNow(state.est.horarios);
      const badge = document.getElementById('openBadge');
      if (st.open) {
        badge.textContent = `Aberto agora • ${st.faixa}`;
        badge.className = 'oc-badge ok';
      } else {
        badge.textContent = st.faixa ? `Fechado • Hoje: ${st.faixa}` : 'Fechado hoje';
        badge.className = 'oc-badge danger';
      }

      // Bairros
      const bairroSel = document.getElementById('bairroSelect');
      bairroSel.innerHTML = '';
      const opt0 = document.createElement('option');
      opt0.value = ''; opt0.textContent = 'Selecione o bairro';
      bairroSel.appendChild(opt0);
      Object.keys(state.est.taxasEntrega || {}).forEach(b => {
        const op = document.createElement('option');
        op.value = b; op.textContent = `${b} (${money(state.est.taxasEntrega[b])})`;
        bairroSel.appendChild(op);
      });

      renderProdutos();
      renderCart();
      applyTipo();
    }

    function renderProdutos() {
      const list = document.getElementById('prodList');
      list.innerHTML = '';
      state.est.cardapio.forEach((p) => {
        const wrap = document.createElement('div');
        wrap.className = 'oc-prod';
        wrap.innerHTML = `
          <div>
            <h4>${p.nome}</h4>
            <p>${p.desc || ''}</p>
            <div class="oc-price">${money(p.preco)}</div>
          </div>
          <div>
            <button class="oc-add">Adicionar</button>
          </div>
        `;
        wrap.querySelector('.oc-add').addEventListener('click', () => openItemModal(p));
        list.appendChild(wrap);
      });
    }

    function renderCart() {
      const box = document.getElementById('cartContainer');
      if (!state.carrinho.length) { box.className='oc-cart-empty'; box.textContent = 'Seu carrinho está vazio.'; updateTotals(); return; }
      box.className='';
      box.innerHTML = '';
      state.carrinho.forEach((it, idx) => {
        const line = document.createElement('div');
        line.className = 'oc-cart-line';
        const adds = (it.adicionais||[]).map(a=>`+${a.nome}`).join(', ');
        const obs = it.obs? ` • ${it.obs}`: '';
        line.innerHTML = `
          <div class="oc-qty">
            <button aria-label="diminuir">−</button>
            <span>${it.qtd}</span>
            <button aria-label="aumentar">+</button>
          </div>
          <div>
            <div><strong>${it.nome}</strong></div>
            <div class="oc-mini oc-muted">${adds}${obs}</div>
          </div>
          <div><strong>${money((it.preco + (it.adicionais||[]).reduce((a,x)=>a+x.preco,0)) * it.qtd)}</strong></div>
        `;
        const [btnMenos, , btnMais] = line.querySelectorAll('.oc-qty button');
        btnMenos.addEventListener('click', () => { it.qtd = Math.max(1, it.qtd-1); renderCart(); });
        btnMais.addEventListener('click', () => { it.qtd++; renderCart(); });
        // clique no nome para remover
        line.querySelector('div:nth-child(2) > div strong').addEventListener('contextmenu', (e) => {
          e.preventDefault(); if (confirm('Remover item?')) { state.carrinho.splice(idx,1); renderCart(); }
        });
        box.appendChild(line);
      });
      updateTotals();
    }

    function updateTotals() {
      const tipo = document.getElementById('tipoPedido').value;
      const bairro = document.getElementById('bairroSelect').value;
      const taxa = (tipo === 'Entrega') ? (state.est.taxasEntrega?.[bairro] || 0) : 0;
      const { subtotal, total } = calcularTotais(state.carrinho, taxa);

      const min = state.est.pedidoMinimo?.Entrega || 0;
      const minimoMsg = document.getElementById('minimoMsg');
      if (tipo === 'Entrega' && min > 0) {
        const falta = Math.max(0, min - subtotal);
        minimoMsg.textContent = falta>0 ? `Faltam ${money(falta)} para atingir o pedido mínimo de entrega (${money(min)}).` : '';
      } else minimoMsg.textContent = '';

      const box = document.getElementById('totalsBox');
      box.innerHTML = `
        <div><span>Subtotal</span><span>${money(subtotal)}</span></div>
        ${tipo==='Entrega' ? `<div><span>Taxa (${bairro||'-'})</span><span>${money(taxa)}</span></div>` : ''}
        <div class="oc-total"><span>Total</span><span>${money(total)}</span></div>
      `;

      const st = isOpenNow(state.est.horarios);
      const btn = document.getElementById('btnEnviar');
      btn.disabled = !state.carrinho.length || !st.open || (tipo==='Entrega' && !bairro);
      btn.textContent = st.open ? 'Enviar pedido pelo WhatsApp' : 'Fechado agora';
    }

    function applyTipo() {
      const tipo = document.getElementById('tipoPedido').value;
      const endWrap = document.getElementById('enderecoFields');
      const bairroSel = document.getElementById('bairroSelect');
      if (tipo === 'Entrega') {
        endWrap.style.display = 'grid';
        bairroSel.disabled = false;
      } else {
        endWrap.style.display = 'none';
        bairroSel.disabled = true; bairroSel.value = '';
      }
      updateTotals();
    }

    // Modal item
    let modalItem = null;
    function openItemModal(p) {
      modalItem = JSON.parse(JSON.stringify(p));
      modalItem.qtd = 1; modalItem._addsSel = new Set();
      document.getElementById('mNome').textContent = p.nome;
      document.getElementById('mDesc').textContent = p.desc || '';
      document.getElementById('mObs').value = '';
      document.getElementById('mQtd').textContent = '1';
      renderAdds(p);
      updateModalSubtotal();
      document.getElementById('itemModal').showModal();
    }

    function renderAdds(p) {
      const box = document.getElementById('mAdds');
      box.innerHTML = '';
      (p.adicionais || []).forEach(ad => {
        const span = document.createElement('label');
        span.className = 'oc-chip';
        span.innerHTML = `<input type="checkbox" data-id="${ad.id}" /> ${ad.nome} (+${money(ad.preco)})`;
        span.querySelector('input').addEventListener('change', (e) => {
          if (e.target.checked) modalItem._addsSel.add(ad.id); else modalItem._addsSel.delete(ad.id);
          updateModalSubtotal();
        });
        box.appendChild(span);
      });
      if (!p.adicionais || !p.adicionais.length) {
        box.innerHTML = '<span class="oc-muted">Sem adicionais para este item.</span>';
      }
    }

    function updateModalSubtotal() {
      const qtd = Number(document.getElementById('mQtd').textContent) || 1;
      const addsPreco = (modalItem.adicionais||[]).filter(a=>modalItem._addsSel.has(a.id)).reduce((s,a)=>s+a.preco,0);
      const val = (modalItem.preco + addsPreco) * qtd;
      document.getElementById('mSubtotal').textContent = money(val);
    }

    document.getElementById('mMais').addEventListener('click', ()=>{ const el = document.getElementById('mQtd'); el.textContent = String(Number(el.textContent)+1); updateModalSubtotal(); });
    document.getElementById('mMenos').addEventListener('click', ()=>{ const el = document.getElementById('mQtd'); el.textContent = String(Math.max(1, Number(el.textContent)-1)); updateModalSubtotal(); });
    document.getElementById('mAddBtn').addEventListener('click', ()=>{
      const qtd = Number(document.getElementById('mQtd').textContent) || 1;
      const obs = document.getElementById('mObs').value.trim();
      const adds = (modalItem.adicionais||[]).filter(a=>modalItem._addsSel.has(a.id));
      state.carrinho.push({ id: modalItem.id, nome: modalItem.nome, preco: modalItem.preco, qtd, adicionais: adds, obs });
      document.getElementById('itemModal').close();
      renderCart();
    });

    // Eventos principais
    document.getElementById('tipoPedido').addEventListener('change', applyTipo);
    document.getElementById('bairroSelect').addEventListener('change', updateTotals);
    document.getElementById('btnEnviar').addEventListener('click', ()=>{
      const dados = {
        tipo: document.getElementById('tipoPedido').value,
        bairroEntrega: document.getElementById('bairroSelect').value || null,
        endereco: document.getElementById('endereco').value,
        referencia: document.getElementById('referencia').value,
        nome: document.getElementById('cliNome').value,
        telefone: document.getElementById('cliFone').value,
        pagamento: document.getElementById('pagamento').value,
        obsGeral: document.getElementById('obsGeral').value
      };
      enviarPedido(state.est, state.carrinho, dados);
    });

    // Boot
    renderEst();
  </script>
</body>
</html>